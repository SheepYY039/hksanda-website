{"version":3,"file":"content-397c54bd.js","sources":["../../../../apollo/course-contents.js","../../../../pages/course/content.vue"],"sourcesContent":["/*\n * @Author: YYYeung\n * @Github: https://github.com/sheepyy039\n * @Date: 2022-01-17 17:34:53\n * @LastEditors: YYYeung\n * @LastEditTime: 2022-01-17 17:37:15\n * @FilePath: /hksanda-website/src/apollo/course-contents.js\n * @Description: apollo mutation and query for course contents\n */\n\nimport gql from \"graphql-tag\";\n\n\nexport const GET_COURSE_CONTENTS = gql`\n    query getCourseContentsQuery {\n        getCourseContents {\n            name\n            content\n            id\n        }\n    }\n`;\n\nexport const UPDATE_COURSE_CONTENT = gql`\n    mutation updateCourseContentMutation($course: CourseContentInput) {\n        updateCourseContent(course: $course) {\n            id\n            name\n            content\n        }\n    }\n`;\n\nexport const ADD_COURSE_CONTENT = gql`\n    mutation addCourseContentMutation($course: CourseContentInput) {\n        addCourseContent(course: $course) {\n            name\n            content\n        }\n    }\n`;\n","<template>\n    <button v-if=\"getIsAdmin\" class=\"btn btn-success\" type=\"submit\" @click=\"create\">\n        添加課堂介紹\n    </button>\n    <TabView :active-index=\"activeIndex\">\n        <TabPanel v-for=\"courseDetail in getCourseContents\" :key=\"courseDetail.name\" :header=\"courseDetail.name\">\n            <Markdown :source=\"'# ' + courseDetail.name\" />\n            <button v-if=\"getIsAdmin\" class=\"btn btn-primary\" type=\"submit\" @click=\"edit(courseDetail)\">\n                編輯 {{ courseDetail.name }}\n            </button>\n            <Markdown :source=\"courseDetail.content\" />\n            <Markdown :source=\"footer\" />\n        </TabPanel>\n    </TabView>\n</template>\n\n<script setup>\nimport { ADD_COURSE_CONTENT, GET_COURSE_CONTENTS, UPDATE_COURSE_CONTENT } from \"@/apollo/course-contents\";\n// import Markdown from \"@/components/others/Markdown.vue\";\nimport { Markdown } from \"#components\"\n\nconst activeIndex = 0;\nconst footer = `\\n\\n---\\n如希望自行组班或报名私人班，欢迎浏览[*私人及组班课程*](/course/session)\\n如有任何疑问，欢迎进行咨询`\nconst openModel = ref(false)\nconst course = reactive({\n    name: \"\",\n    contents: \"\",\n})\n\nconst store = useMainStore();\nconst { getIsAdmin } = storeToRefs(store);\n\nconst { data } = await useAsyncQuery(GET_COURSE_CONTENTS);\nconst getCourseContents = data.value?.getCourseContents;\nconsole.log(getCourseContents)\n\nconst { toggleModel } = store;\n\nfunction newCourse(course) {\n    const { mutate } = useMutation(ADD_COURSE_CONTENT, {\n        course: course,\n    });\n    // TODO: check if mutation works\n}\n\nfunction editCourse(course) {\n    // TODO: check if mutation works\n    console.log(course);\n    const { mutate } = useMutation(UPDATE_COURSE_CONTENT, {\n        course: course,\n    });\n}\n\nfunction edit(course) {\n    const modelDetails = {\n        content: course,\n        type: \"course\",\n        submitFunction: editCourse,\n    };\n    console.log(modelDetails);\n    toggleModel(modelDetails);\n}\n\nfunction create() {\n    const modelDetails = {\n        content: {\n            name: \"\",\n            content: \"\",\n        },\n        type: \"course\",\n        submitFunction: newCourse,\n    };\n    toggleModel(modelDetails);\n}\n\n\n</script>\n\n<style lang=\"scss\" scoped>\n.sizes {\n    .p-inputtext {\n        display: block;\n        margin-bottom: 0.5rem;\n\n        &:last-child {\n            margin-bottom: 0;\n        }\n    }\n}\n\n.p-field * {\n    display: block;\n}\n</style>\n"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaO,MAAM,sBAAsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAU5B,MAAM,wBAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;ACZlC,MAAM,cAAc;AACpB,MAAM,SAAS;AAAA;AAAA;AAAA;AAAA;;;;;;;AACG,QAAI,KAAK;AACZ,aAAS;AAAA,MACpB,MAAM;AAAA,MACN,UAAU;AAAA,IACd,CAAC;AAED,UAAM,QAAQ,aAAY;AAC1B,UAAM,EAAE,WAAY,IAAG,YAAY,KAAK;AAExC,UAAM,EAAE,KAAM,KAAS,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,cAAc,mBAAmB,CAAA;AACxD,UAAM,qBAAoB,UAAK,UAAL,mBAAY;AACtC,YAAQ,IAAI,iBAAiB;AAE7B,UAAM,EAAE,YAAa,IAAG;AASxB,aAAS,WAAW,QAAQ;AAExB,cAAQ,IAAI,MAAM;AACC,kBAAY,uBAAuB;AAAA,QAClD;AAAA,MACR,CAAK;AAAA,IACL;AAEA,aAAS,KAAK,QAAQ;AAClB,YAAM,eAAe;AAAA,QACjB,SAAS;AAAA,QACT,MAAM;AAAA,QACN,gBAAgB;AAAA,MACxB;AACI,cAAQ,IAAI,YAAY;AACxB,kBAAY,YAAY;AAAA,IAC5B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}