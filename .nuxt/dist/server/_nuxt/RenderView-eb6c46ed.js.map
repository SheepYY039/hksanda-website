{"version":3,"file":"RenderView-eb6c46ed.js","sources":["../../../../components/RenderView.vue"],"sourcesContent":["<template>\n    <div v-if=\"view?.title != null\" class=\"container-fluid\">\n        <h1>{{ view?.title }}</h1>\n\n        <markdown v-if=\"view?.content != null\" :source=\"view?.content\" />\n        <button v-if=\"getIsAdmin\" class=\"btn btn-primary mb-3\" type=\"submit\" @click=\"edit\">\n            編輯\n        </button>\n    </div>\n</template>\n\n<script setup>\nimport { Markdown } from \"#components\";\nimport { GET_VIEW_BY_ROUTE } from \"~/apollo/view\";\n\nconst store = useMainStore();\n\nconst props = defineProps({\n    route: String\n})\nconst { data } = await useAsyncQuery(GET_VIEW_BY_ROUTE, { route: props.route });\nconst view = data.value?.getViewByRoute;\n\nconsole.log(\"getView\", data.value?.getViewByRoute)\n\nconst { toggleModel, updateView, getView } = store;\n\n\n\nconst { getIsAdmin } = storeToRefs(store);\n// const views = store.views;\n// console.log(\"views\", views)\n\n// view.value = views.find((view) => view.route === props.route)\n// console.log((\"view\", view))\n\n\n// view.value = Object.assign({}, store.getViewByRoute(props.route));\n// BUG: Call View\n// const view = views.find((view) => view.route === props.route);\n\n// console.log(\"view\", view);\n// console.log(view?.value?.title);\n\n// onMounted(() => {\n//     // getViewByRoute(props.view.route);\n//     // getView();\n\n// })\n\n\nfunction edit() {\n    const modelDetails = {\n        content: view.content,\n        submitFunction: submitChange,\n    };\n    toggleModel(modelDetails);\n}\n\nfunction submitChange(updatedContent) {\n    updateView({\n        viewId: view.id,\n        content: updatedContent,\n    });\n}\n\n</script>\n\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAeA,UAAM,QAAQ,aAAY;AAK1B,UAAM,EAAE,KAAM,kDAAS,cAAc,mBAAmB,EAAE,OAAO,MAAM,MAAO,CAAA,CAAA;AAC9E,UAAM,QAAO,UAAK,UAAL,mBAAY;AAEzB,YAAQ,IAAI,YAAW,UAAK,UAAL,mBAAY,cAAc;AAMjD,UAAM,EAAE,WAAY,IAAG,YAAY,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}