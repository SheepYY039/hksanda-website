{"version":3,"file":"our-team-78391876.js","sources":["../../../../apollo/instructor.js","../../../../apollo/rank.js","../../../../pages/about/our-team.vue"],"sourcesContent":["import gql from \"graphql-tag\";\n\nexport const GET_INSTRUCTORS = gql`\n    query GetInstructorsQuery {\n        getInstructors {\n            id\n            name\n            strengths\n            certificates\n            experiences\n        }\n    }\n`;\n\nexport const UPDATE_INSTRUCTOR = gql`\n    mutation updateInstructorMutation($instructor: InstructorInput) {\n        updateInstructor(instructor: $instructor) {\n            id\n            name\n            strengths\n            certificates\n            experiences\n        }\n    }\n`;\n\nexport const ADD_INSTRUCTOR = gql`\n    mutation addInstructorMutation($instructor: InstructorInput) {\n        addInstructor(instructor: $instructor) {\n            id\n            name\n            strengths\n            certificates\n            experiences\n        }\n    }\n`;\n\nexport const REMOVE_INSTRUCTOR = gql`\n    mutation removeInstructorMutation($instructorId: ID) {\n        removeInstructor(instructorId: $instructorId) {\n            id\n            name\n            strengths\n            certificates\n            experiences\n        }\n    }\n`;\n","import gql from \"graphql-tag\";\n\nexport const GET_RANKINGS = gql`\n    query GetRankingsQuery {\n        getRankings {\n            id\n            name\n            awardees\n        }\n    }\n`;\n\nexport const UPDATE_RANK = gql`\n    mutation updateRankMutation($details: RankInput) {\n        updateRanking(details: $details) {\n            id\n            name\n            awardees\n        }\n    }\n`;\n","<template>\n    <div class=\"container\">\n        <h1>專業教練團隊</h1>\n        <button v-if=\"getIsAdmin\" class=\"btn btn-success\" type=\"submit\" @click=\"create\">\n            添加教练\n        </button>\n        <div class=\"row\">\n            <div v-for=\"instructor in getInstructors\" :key=\"instructor.id\" class=\"col-lg-6 my-2\">\n                <div class=\"card\">\n                    <div class=\"card-body\">\n                        <h2 class=\"card-title\">\n                            {{ instructor.name }}\n                        </h2>\n                        <h5 class=\"card-subtitle mb-2 text-muted\">\n                            {{ instructor.strengths }}\n                        </h5>\n                        <p v-for=\"(cert, i) in instructor.certificates\" :key=\"cert + i\" class=\"card-text\">\n                            {{ cert }}\n                        </p>\n                    </div>\n                    <div v-if=\"instructor.experiences || getIsAdmin\" class=\"card-footer\">\n                        <p v-for=\"experience in instructor.experiences\" :key=\"instructor.id + experience\">\n                            {{ experience }}\n                        </p>\n                        <Button v-if=\"getIsAdmin\" :label=\"`編輯 ${instructor.name}`\" class=\"p-button-primary p-button-sm\"\n                            type=\"submit\" @click=\"edit(instructor)\" />\n                        <ConfirmPopup />\n                        <Button v-if=\"getIsAdmin\" class=\"p-button-danger p-button-outlined p-button-sm ml-2\"\n                            icon=\"pi pi-times\" label=\"删除\" @click=\"confirm($event, instructor)\" />\n                    </div>\n                </div>\n            </div>\n        </div>\n        <hr>\n        <h1>持有認可實用自衛散打段位證書</h1>\n        <div v-for=\"rank in getRankings\" :key=\"rank.name\">\n            <h2>{{ rank.name }}</h2>\n            <button v-if=\"getIsAdmin\" class=\"btn btn-success\" type=\"submit\" @click=\"modify(rank)\">\n                编辑 {{ rank.name }} 学员\n            </button>\n            <div class=\"row\">\n                <div v-for=\"awardee in rank.awardees\" :key=\"awardee\" class=\"tag m-2 rank_tag\">\n                    {{ awardee }}\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport { ADD_INSTRUCTOR, GET_INSTRUCTORS, REMOVE_INSTRUCTOR, UPDATE_INSTRUCTOR } from \"@/apollo/instructor\";\nimport { GET_RANKINGS, UPDATE_RANK } from \"@/apollo/rank\";\n\nconst getInstructorsResponse = await useAsyncQuery(GET_INSTRUCTORS);\nconst getInstructors = getInstructorsResponse.data?.value?.getInstructors;\n\nconst { data } = await useAsyncQuery(GET_RANKINGS);\nconst getRankings = data?.value?.getRankings;\n\nconst store = useMainStore();\nconst { getIsAdmin } = storeToRefs(store);\n\nconst { toggleModel } = store;\n\nfunction remove(instructorDetails) {\n    console.log(\"remove: \", instructorDetails)\n    const { mutate } = useMutation(REMOVE_INSTRUCTOR, {\n        instructorId: instructorDetails.id,\n    })\n\n}\n\nfunction edit(instructorDetails) {\n    console.log(\"edit: \", instructorDetails)\n    const modelDetails = {\n        content: {\n            ...instructorDetails,\n            certificates: instructorDetails.certificates ? instructorDetails.certificates.join('\\n') : \"\",\n            experiences: instructorDetails.experiences ? instructorDetails.experiences.join('\\n') : \"\",\n        },\n        submitFunction: submitChange,\n        type: \"instructor\",\n    };\n    toggleModel(modelDetails);\n}\n\nfunction create() {\n    const modelDetails = {\n        content: {\n            name: \"\",\n            strengths: \"\",\n            certificates: null,\n            experiences: null\n        },\n        submitFunction: submitChange,\n        type: \"instructor\",\n    };\n    toggleModel(modelDetails);\n}\n\nfunction newInstructor(instructorDetails) {\n    console.log(\"new instructor\", instructorDetails)\n    const { mutate } = useMutation(ADD_INSTRUCTOR,\n        {\n            instructor: {\n                ...instructorDetails,\n                certificates: instructorDetails.certificates != null ? instructorDetails.certificates.split('\\n') : \"\",\n                experiences: instructorDetails.experiences != null ? instructorDetails.experiences.split('\\n') : \"\"\n            }\n        })\n}\n\nfunction updateInstructor(instructorDetails) {\n    console.log(\"update instructor\", instructorDetails);\n    const { mutate } = useMutation(UPDATE_INSTRUCTOR,\n        {\n            instructor: {\n                ...instructorDetails,\n                certificates: instructorDetails.certificates != null ? instructorDetails.certificates.split('\\n') : \"\",\n                experiences: instructorDetails.experiences != null ? instructorDetails.experiences.split('\\n') : \"\"\n            },\n        })\n}\n\nfunction submitChange(editedInstructor) {\n    console.log(editedInstructor)\n    if (editedInstructor.instructorId) {\n        // Instructor Exists already\n        updateInstructor(editedInstructor)\n    } else {\n        // this is a new instructor\n        newInstructor(editedInstructor)\n    }\n}\n\nfunction confirm(event, instructor) {\n    this.$confirm.require({\n        target: event.currentTarget,\n        message: `你确定要删除 ${instructor.name} 吗？`,\n        icon: 'pi pi-info-circle',\n        acceptClass: 'p-button-danger',\n        accept: () => {\n            remove(instructor)\n            this.$toast.add({\n                severity: 'info',\n                summary: '成功',\n                detail: `已成功删除 ${instructor.name}`,\n                life: 3000\n            });\n        },\n        reject: () => {\n            // this.$toast.add({severity: 'error', summary: 'Rejected', detail: 'You have rejected', life: 3000});\n        }\n    });\n}\n\nfunction modifyRanking(rankDetails) {\n    console.log(\"update instructor\", rankDetails);\n    const { mutate } = useMutation(UPDATE_RANK, {\n        details: {\n            ...rankDetails,\n            awardees: rankDetails.awardees != null ? rankDetails.awardees.split('\\n') : \"\",\n        },\n    })\n}\n\n</script>\n\n<style lang=\"scss\">\n.rank_tag {\n    width: auto !important;\n}\n\n.instructor {\n    &__image {\n        width: 100%;\n    }\n}\n\n.card {\n    background-color: transparent;\n}\n\n.tag {\n    background-image: url(\"@/assets/images/wood.jpeg\");\n    background-repeat: repeat;\n    background-size: contain;\n    width: fit-content;\n    writing-mode: vertical-lr;\n    font-size: x-large;\n\n    text-shadow: 0px 1px 0px rgba(255, 255, 255, 0.3),\n        0px -1px 0px rgba(0, 0, 0, 0.7);\n\n    box-shadow: 0 2px 1px -1px rgb(0 0 0 / 20%), 0 1px 1px 0 rgb(0 0 0 / 14%),\n        0 1px 3px 0 rgb(0 0 0 / 12%);\n\n    padding: 1%;\n    text-align-last: justify;\n}\n</style>\n"],"names":[],"mappings":"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"}